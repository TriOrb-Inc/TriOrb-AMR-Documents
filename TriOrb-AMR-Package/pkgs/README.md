[../](../README.md)
# TriOrb-AMR-Package on VM

# ROS2 Packages
- [triorb_cv_interface](./TriOrb-ROS2-Types/triorb_cv_interface/README.md)
- [triorb_drive_interface](./TriOrb-ROS2-Types/triorb_drive_interface/README.md)
- [triorb_field_interface](./TriOrb-ROS2-Types/triorb_field_interface/README.md)
- [triorb_project_interface](./TriOrb-ROS2-Types/triorb_project_interface/README.md)
- [triorb_sensor_interface](./TriOrb-ROS2-Types/triorb_sensor_interface/README.md)
- [triorb_static_interface](./TriOrb-ROS2-Types/triorb_static_interface/README.md)

# ROS2 Interface list
- [triorb_cv_interface/msg/BoundingBox](./TriOrb-ROS2-Types/triorb_cv_interface/README.md#triorb_cv_interfacemsgboundingbox)
- [triorb_cv_interface/msg/Detection](./TriOrb-ROS2-Types/triorb_cv_interface/README.md#triorb_cv_interfacemsgdetection)
- [triorb_drive_interface/msg/DriveGains](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgdrivegains)
- [triorb_drive_interface/msg/MotorParams](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgmotorparams)
- [triorb_drive_interface/msg/MotorStatus](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgmotorstatus)
- [triorb_drive_interface/msg/Route](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgroute)
- [triorb_drive_interface/msg/TriorbPos3](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgtriorbpos3)
- [triorb_drive_interface/msg/TriorbRunPos3](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgtriorbrunpos3)
- [triorb_drive_interface/msg/TriorbRunResult](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgtriorbrunresult)
- [triorb_drive_interface/msg/TriorbRunSetting](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgtriorbrunsetting)
- [triorb_drive_interface/msg/TriorbRunVel3](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgtriorbrunvel3)
- [triorb_drive_interface/msg/TriorbSetPos3](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgtriorbsetpos3)
- [triorb_drive_interface/msg/TriorbSpeed](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgtriorbspeed)
- [triorb_drive_interface/msg/TriorbVel3](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacemsgtriorbvel3)
- [triorb_field_interface/msg/Keyframe](./TriOrb-ROS2-Types/triorb_field_interface/README.md#triorb_field_interfacemsgkeyframe)
- [triorb_sensor_interface/msg/CameraDevice](./TriOrb-ROS2-Types/triorb_sensor_interface/README.md#triorb_sensor_interfacemsgcameradevice)
- [triorb_sensor_interface/msg/DistanceSensor](./TriOrb-ROS2-Types/triorb_sensor_interface/README.md#triorb_sensor_interfacemsgdistancesensor)
- [triorb_sensor_interface/msg/ImuSensor](./TriOrb-ROS2-Types/triorb_sensor_interface/README.md#triorb_sensor_interfacemsgimusensor)
- [triorb_static_interface/msg/HostStatus](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacemsghoststatus)
- [triorb_static_interface/msg/NodeInfo](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacemsgnodeinfo)
- [triorb_static_interface/msg/RobotStatus](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacemsgrobotstatus)
- [triorb_static_interface/msg/SettingIPv4](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacemsgsettingipv4)
- [triorb_static_interface/msg/SettingROS](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacemsgsettingros)
- [triorb_static_interface/msg/SettingSSID](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacemsgsettingssid)
- [triorb_cv_interface/srv/Version](./TriOrb-ROS2-Types/triorb_cv_interface/README.md#triorb_cv_interfacesrvversion)
- [triorb_drive_interface/srv/GetPath](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacesrvgetpath)
- [triorb_drive_interface/srv/GetRoute](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacesrvgetroute)
- [triorb_drive_interface/srv/MotorParams](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacesrvmotorparams)
- [triorb_drive_interface/srv/TriorbRunPos3](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacesrvtriorbrunpos3)
- [triorb_drive_interface/srv/TriorbRunVel3](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacesrvtriorbrunvel3)
- [triorb_drive_interface/srv/TriorbSetPos3](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacesrvtriorbsetpos3)
- [triorb_drive_interface/srv/Version](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfacesrvversion)
- [triorb_field_interface/srv/GetKeyframeList](./TriOrb-ROS2-Types/triorb_field_interface/README.md#triorb_field_interfacesrvgetkeyframelist)
- [triorb_field_interface/srv/SetKeyframe](./TriOrb-ROS2-Types/triorb_field_interface/README.md#triorb_field_interfacesrvsetkeyframe)
- [triorb_project_interface/srv/Version](./TriOrb-ROS2-Types/triorb_project_interface/README.md#triorb_project_interfacesrvversion)
- [triorb_sensor_interface/srv/CameraCamture](./TriOrb-ROS2-Types/triorb_sensor_interface/README.md#triorb_sensor_interfacesrvcameracamture)
- [triorb_sensor_interface/srv/CameraDevice](./TriOrb-ROS2-Types/triorb_sensor_interface/README.md#triorb_sensor_interfacesrvcameradevice)
- [triorb_sensor_interface/srv/GetDistanceSensor](./TriOrb-ROS2-Types/triorb_sensor_interface/README.md#triorb_sensor_interfacesrvgetdistancesensor)
- [triorb_sensor_interface/srv/SetDistanceSensor](./TriOrb-ROS2-Types/triorb_sensor_interface/README.md#triorb_sensor_interfacesrvsetdistancesensor)
- [triorb_sensor_interface/srv/Version](./TriOrb-ROS2-Types/triorb_sensor_interface/README.md#triorb_sensor_interfacesrvversion)
- [triorb_static_interface/srv/GetImage](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvgetimage)
- [triorb_static_interface/srv/GetString](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvgetstring)
- [triorb_static_interface/srv/GetStringList](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvgetstringlist)
- [triorb_static_interface/srv/NodeInfo](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvnodeinfo)
- [triorb_static_interface/srv/Ros2Launch](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvros2launch)
- [triorb_static_interface/srv/Ros2Run](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvros2run)
- [triorb_static_interface/srv/SetImage](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvsetimage)
- [triorb_static_interface/srv/SetString](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvsetstring)
- [triorb_static_interface/srv/SettingIPv4](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvsettingipv4)
- [triorb_static_interface/srv/SettingROS](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvsettingros)
- [triorb_static_interface/srv/SettingSSID](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvsettingssid)
- [triorb_static_interface/srv/Version](./TriOrb-ROS2-Types/triorb_static_interface/README.md#triorb_static_interfacesrvversion)
- [triorb_drive_interface/action/TriorbSetPath](./TriOrb-ROS2-Types/triorb_drive_interface/README.md#triorb_drive_interfaceactiontriorbsetpath)

# This list generated by commands as follow:
```bash
source ./generate_md.bash
```

## create new python package
```bash
python new_pkg_py.py -h
#python new_pkg_py.py triorb_new_package new_node
```

## create new cpp package
```bash
python new_pkg_cpp.py -h
#python new_pkg_cpp.py triorb_new_package new_node
```

## build & install in docker container
```bash
source /ros_entrypoint.sh
# --allow-overridingを付けるとrebuildが遅くなるので注意
colcon build --install-base /install/${ROS_DISTRO} &&\
source /install/${ROS_DISTRO}/setup.bash
```

## run ( local )
```bash
echo 'ROS_DISTRO='${ROS_DISTRO}', ROS_LOCALHOST_ONLY='${ROS_LOCALHOST_ONLY}', ROS_DOMAIN_ID='${ROS_DOMAIN_ID}', ROS_PREFIX='${ROS_PREFIX} &&\
ros2 launch basic.xml
```

## run ( global )
```bash
docker run -it --rm --name bridge --privileged --net=host --runtime=nvidia --gpus all \
               --add-host=localhost:127.0.1.1 \
               -e ROS_LOCALHOST_ONLY=0 \
               -e ROS_DOMAIN_ID=$(cat /triorb/params/ROS_DOMAIN_ID) \
               -e ROS_PREFIX=$(cat /triorb/params/ROS_PREFIX) \
               -v /dev:/dev \
               -v /sys/devices/:/sys/devices/ \
               -v /triorb/log:/log \
               -v /triorb/build:/build \
               -v /triorb/install:/install \
               -v /triorb/params:/params \
               -v /triorb/data:/data \
               -v /triorb/tslam:/tslam \
               -v /etc/NetworkManager/system-connections:/etc/NetworkManager/system-connections \
               -v /var/run/dbus:/var/run/dbus \
               -v $(pwd):/ws \
               -w /ws \
               $(cat /triorb/params/DOCKER_IMAGE_ROS)
source /ros_entrypoint.sh
source /install/${ROS_DISTRO}/setup.bash
echo 'ROS_DISTRO='${ROS_DISTRO}', ROS_LOCALHOST_ONLY='${ROS_LOCALHOST_ONLY}', ROS_DOMAIN_ID='${ROS_DOMAIN_ID}', ROS_PREFIX='${ROS_PREFIX} &&\
ros2 launch global.xml
```